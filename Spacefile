# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
micros:
  - name: muji-mall
    src: ./frontend/muji-mall
    engine: static
    primary: true
    public: true    
    commands:
      - pnpm build:h5    
    serve: dist/build/h5 

  - name: api
    src: ./backend/muji-mall-server
    engine: python3.9    
    path: api
    public: true
    presets:
      env:
        - name: ROOT_PATH
          description: 部署的时候需要设置前缀
          default: "/api"

        - name: DEPLOY
          description: 部署的时候用服务器上的/static接口
          default: "True"  
    run: uvicorn main:app
